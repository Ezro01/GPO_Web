#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

echo "=========================================="
echo "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–π –ø–æ –≥–æ–ª–æ—Å—É"
echo "=========================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–∏
if [ ! -f "emotion_model.h5" ]; then
    echo "‚ö†Ô∏è  –ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
    echo "–•–æ—Ç–∏—Ç–µ –æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å —Å–µ–π—á–∞—Å? (y/n)"
    read -r response
    if [ "$response" = "y" ] || [ "$response" = "Y" ]; then
        echo ""
        echo "üìä –ê–Ω–∞–ª–∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞..."
        python3 analyze_dataset.py
        echo ""
        echo "ü§ñ –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏..."
        python3 train_model.py
        echo ""
    else
        echo "–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ –æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å:"
        echo "  python3 train_model.py"
        exit 1
    fi
fi

echo ""
echo "üöÄ –ó–∞–ø—É—Å–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
echo "–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:8000"
echo ""
python3 app.py
